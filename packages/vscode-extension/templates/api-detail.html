<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Dynamic Sidebar</title>
    <link
      href="{{ styleUri }}"
      rel="stylesheet" />
  </head>

  <body>
    <div class="container">
      <!-- APIå¤´éƒ¨ä¿¡æ¯ -->
      <div class="api-header">
        <div class="api-method">
          <span class="method-tag get">GET</span>
          <div class="api-url">/api/v1/users/{userId}/orders</div>
        </div>
        <div class="api-description">
          è·å–æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰è®¢å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬è®¢å•çŠ¶æ€ã€å•†å“åˆ—è¡¨ã€ä»·æ ¼ç­‰è¯¦ç»†ä¿¡æ¯ã€‚æ”¯æŒåˆ†é¡µå’Œè¿‡æ»¤æ¡ä»¶ã€‚
        </div>
      </div>

      <!-- é€‰é¡¹å¡å¯¼èˆª -->
      <div class="tabs-container">
        <div class="tabs">
          <div
            class="tab active"
            data-tab="parameters">
            Parameters
          </div>
          <div
            class="tab"
            data-tab="response">
            Response
          </div>
        </div>

        <!-- Parameters å†…å®¹ -->
        <div
          class="tab-content active"
          id="parameters-content">
          <!-- Path Parameters -->
          <div class="section">
            <div class="section-header">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style="margin-right: 8px">
                <path
                  d="M12 2L2 7L12 12L22 7L12 2Z"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M2 17L12 22L22 17"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M2 12L12 17L22 12"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Path Parameters
            </div>
            <table class="parameters-table">
              <thead>
                <tr>
                  <th style="width: 20%">å‚æ•°å</th>
                  <th style="width: 10%">å¿…å¡«</th>
                  <th style="width: 15%">ç±»å‹</th>
                  <th style="width: 55%">æè¿°</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><span class="parameter-name">userId</span></td>
                  <td><span class="parameter-required required">å¿…å¡«</span></td>
                  <td><span class="parameter-type">integer</span></td>
                  <td>ç”¨æˆ·å”¯ä¸€æ ‡è¯†IDï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆçš„ç”¨æˆ·ID</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Query Parameters -->
          <div class="section">
            <div class="section-header">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style="margin-right: 8px">
                <path
                  d="M11 17C14.866 17 18 13.866 18 10C18 6.13401 14.866 3 11 3C7.13401 3 4 6.13401 4 10C4 13.866 7.13401 17 11 17Z"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M21 21L16.65 16.65"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Query Parameters
            </div>
            <table class="parameters-table">
              <thead>
                <tr>
                  <th style="width: 20%">å‚æ•°å</th>
                  <th style="width: 10%">å¿…å¡«</th>
                  <th style="width: 15%">ç±»å‹</th>
                  <th style="width: 55%">æè¿°</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><span class="parameter-name">status</span></td>
                  <td><span class="parameter-required optional">å¯é€‰</span></td>
                  <td><span class="parameter-type">string</span></td>
                  <td>è®¢å•çŠ¶æ€è¿‡æ»¤æ¡ä»¶ï¼Œå¯é€‰å€¼: pending, completed, cancelled</td>
                </tr>
                <tr>
                  <td><span class="parameter-name">page</span></td>
                  <td><span class="parameter-required optional">å¯é€‰</span></td>
                  <td><span class="parameter-type">integer</span></td>
                  <td>åˆ†é¡µé¡µç ï¼Œé»˜è®¤å€¼ä¸º1</td>
                </tr>
                <tr>
                  <td><span class="parameter-name">limit</span></td>
                  <td><span class="parameter-required optional">å¯é€‰</span></td>
                  <td><span class="parameter-type">integer</span></td>
                  <td>æ¯é¡µè®°å½•æ•°ï¼Œé»˜è®¤å€¼ä¸º20ï¼Œæœ€å¤§å€¼ä¸º100</td>
                </tr>
                <tr>
                  <td><span class="parameter-name">sort</span></td>
                  <td><span class="parameter-required optional">å¯é€‰</span></td>
                  <td><span class="parameter-type">string</span></td>
                  <td>æ’åºå­—æ®µï¼Œæ ¼å¼: field_name:asc æˆ– field_name:desc</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Request Body -->
          <div class="section">
            <div class="section-header">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style="margin-right: 8px">
                <path
                  d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M14 2V8H20"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M16 13H8"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M16 17H8"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M10 9H9H8"
                  stroke="var(--vscode-accent)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Request Body
            </div>
            <div class="response-section">
              <div class="response-title">
                <div class="status-code">application/json</div>
                <div class="response-description">æ­¤æ¥å£ä¸éœ€è¦è¯·æ±‚ä½“</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Response å†…å®¹ -->
        <div
          class="tab-content"
          id="response-content">
          <!-- å“åº”çŠ¶æ€ -->
          <div class="response-status">
            <span class="status-badge status-200">200: Success</span>
            <span class="status-badge status-400">400: Bad Request</span>
            <span class="status-badge status-400">401: Unauthorized</span>
            <span class="status-badge status-400">404: Not Found</span>
          </div>

          <!-- æˆåŠŸå“åº” -->
          <div class="section">
            <div class="section-header">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style="margin-right: 8px">
                <path
                  d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999"
                  stroke="var(--vscode-success)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M22 4L12 14.01L9 11.01"
                  stroke="var(--vscode-success)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Success Response
            </div>
            <div class="response-section">
              <div class="response-title">
                <div class="status-code">200 OK</div>
                <div class="response-description">æˆåŠŸè·å–è®¢å•åˆ—è¡¨</div>
              </div>

              <div class="json-container">
                <pre><code>{
"<span class="json-key">status</span>": <span class="json-string">"success"</span>,
"<span class="json-key">code</span>": <span class="json-number">200</span>,
"<span class="json-key">message</span>": <span class="json-string">"Orders retrieved successfully"</span>,
"<span class="json-key">data</span>": {
  "<span class="json-key">total</span>": <span class="json-number">125</span>,
  "<span class="json-key">page</span>": <span class="json-number">1</span>,
  "<span class="json-key">limit</span>": <span class="json-number">20</span>,
  "<span class="json-key">orders</span>": [
    {
      "<span class="json-key">id</span>": <span class="json-string">"ORD-2023-001"</span>,
      "<span class="json-key">userId</span>": <span class="json-number">42</span>,
      "<span class="json-key">status</span>": <span class="json-string">"completed"</span>,
      "<span class="json-key">totalAmount</span>": <span class="json-number">149.99</span>,
      "<span class="json-key">createdAt</span>": <span class="json-string">"2023-07-15T10:30:00Z"</span>,
      "<span class="json-key">items</span>": [
        {
          "<span class="json-key">productId</span>": <span class="json-number">101</span>,
          "<span class="json-key">name</span>": <span class="json-string">"Wireless Headphones"</span>,
          "<span class="json-key">quantity</span>": <span class="json-number">1</span>,
          "<span class="json-key">price</span>": <span class="json-number">99.99</span>
        },
        {
          "<span class="json-key">productId</span>": <span class="json-number">205</span>,
          "<span class="json-key">name</span>": <span class="json-string">"Phone Case"</span>,
          "<span class="json-key">quantity</span>": <span class="json-number">2</span>,
          "<span class="json-key">price</span>": <span class="json-number">25.00</span>
        }
      ]
    }
  ]
}
}</code></pre>
              </div>
            </div>
          </div>

          <!-- é”™è¯¯å“åº” -->
          <div class="section">
            <div class="section-header">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style="margin-right: 8px">
                <path
                  d="M12 8V12V8ZM12 16H12.01H12ZM21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z"
                  stroke="var(--vscode-error)"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Error Response
            </div>
            <div class="response-section">
              <div class="response-title">
                <div class="status-code">404 Not Found</div>
                <div class="response-description">ç”¨æˆ·ä¸å­˜åœ¨</div>
              </div>

              <div class="json-container">
                <pre><code>{
"<span class="json-key">status</span>": <span class="json-string">"error"</span>,
"<span class="json-key">code</span>": <span class="json-number">404</span>,
"<span class="json-key">message</span>": <span class="json-string">"User not found"</span>,
"<span class="json-key">details</span>": {
  "<span class="json-key">userId</span>": <span class="json-number">9999</span>
}
}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <button class="copy-btn">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8 4V16C8 16.5304 8.21071 17.0391 8.58579 17.4142C8.96086 17.7893 9.46957 18 10 18H18C18.5304 18 19.0391 17.7893 19.4142 17.4142C19.7893 17.0391 20 16.5304 20 16V7.5C20 7.10218 19.842 6.72064 19.5607 6.43934C19.2794 6.15804 18.8978 6 18.5 6H14C13.4696 6 12.9609 5.78929 12.5858 5.41421C12.2107 5.03914 12 4.53043 12 4V4C12 3.46957 11.7893 2.96086 11.4142 2.58579C11.0391 2.21071 10.5304 2 10 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V14C4 14.5304 4.21071 15.0391 4.58579 15.4142C4.96086 15.7893 5.46957 16 6 16H8"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          å¤åˆ¶APIæ–‡æ¡£
        </button>
      </div>
    </div>
    <div class="header">
      <h1>Dynamic Sidebar</h1>
      <div class="controls">
        <button id="add-btn">Add Item</button>
        <button id="refresh-btn">Refresh</button>
      </div>
    </div>

    <div id="items-container">
      <p
        class="empty-message"
        id="empty-message">
        No items yet. Click "Add Item" to get started.
      </p>
      <ul id="items-list"></ul>
    </div>
    <script>
      // é€‰é¡¹å¡åˆ‡æ¢åŠŸèƒ½
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

          // æ·»åŠ å½“å‰æ´»åŠ¨çŠ¶æ€
          tab.classList.add('active');
          const tabId = tab.getAttribute('data-tab');
          document.getElementById(`${tabId}-content`).classList.add('active');
        });
      });

      // å¤åˆ¶æŒ‰é’®åŠŸèƒ½
      document.querySelector('.copy-btn').addEventListener('click', function () {
        const originalContent = this.innerHTML;
        this.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 16.1719L19.5938 5.57812L21 6.98438L9 18.9844L3.42188 13.4062L4.82812 12L9 16.1719Z" fill="currentColor"/>
                </svg>
                å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
            `;

        setTimeout(() => {
          this.innerHTML = originalContent;
        }, 2000);
      });

      // åŠ¨æ€æ£€æµ‹ä¸»é¢˜å˜åŒ–
      const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

      function handleThemeChange(e) {
        const isDarkMode = e.matches;
        document.documentElement.style.setProperty('--vscode-background', isDarkMode ? '#1e1e1e' : '#ffffff');
        document.documentElement.style.setProperty('--vscode-foreground', isDarkMode ? '#d4d4d4' : '#333333');
        document.documentElement.style.setProperty('--vscode-border', isDarkMode ? '#454545' : '#cccccc');
      }

      darkModeMediaQuery.addListener(handleThemeChange);
      handleThemeChange(darkModeMediaQuery);

      const vscode = acquireVsCodeApi();

      // é€šçŸ¥æ‰©å±•Webviewå·²å‡†å¤‡å¥½
      window.addEventListener('load', () => {
        vscode.postMessage({ type: 'webview-ready' });
      });
      // å¤„ç†æŒ‰é’®ç‚¹å‡»
      document.getElementById('add-btn').addEventListener('click', () => {
        vscode.postMessage({ type: 'addItem' });
      });

      document.getElementById('refresh-btn').addEventListener('click', () => {
        vscode.postMessage({ type: 'refresh' });
      });

      // å¤„ç†æ¥è‡ªæ‰©å±•çš„æ¶ˆæ¯
      window.addEventListener('message', event => {
        const message = event.data;
        switch (message.type) {
          case 'updateData':
            updateItemsList(message.data);
            break;
        }
      });

      function updateItemsList(items) {
        const list = document.getElementById('items-list');
        const emptyMsg = document.getElementById('empty-message');

        if (items.length === 0) {
          list.innerHTML = '';
          emptyMsg.style.display = 'block';
          return;
        }

        emptyMsg.style.display = 'none';
        list.innerHTML = '';

        items.forEach(item => {
          const li = document.createElement('li');
          li.className = 'item';
          li.innerHTML = `
                  <span class="item-icon">ğŸ“„</span>
                  <span class="item-label">${item.label}</span>
                  <span class="item-id">#${item.id.slice(0, 6)}</span>
              `;
          list.appendChild(li);
        });
      }
    </script>
  </body>
</html>
